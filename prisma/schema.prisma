generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String  @id @default(auto()) @map("_id") @db.ObjectId
  profile_photo String?
  username      String
  email         String
  password      String
}

model Patient {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  profile_photo  String?
  name           String
  owner          String?
  specie         String?
  race           String?
  gender         String?
  weight         String?
  prognosis      String?
  diagnosis      Json[]
  physical_shape String?
  entry_date     String?
  departure_date String?
  reports        Report[]
  exams          Exam[]
  files          Files[]
}

model Report {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  patientId   String   @db.ObjectId
  shift       String
  author      String
  title       String
  report_text String
  filename    String?
  attachment  String?
  createdAt   String?
  updatedAt   String?
  patient     Patient? @relation(fields: [patientId], references: [id])
}

model Exam {
  id          String            @id @default(auto()) @map("_id") @db.ObjectId
  patientId   String            @db.ObjectId
  name        String
  createdAt   String?
  updatedAt   String?
  patient     Patient?          @relation(fields: [patientId], references: [id])
  attachments ExamAttachments[]
}

model ExamAttachments {
  id      String @id @default(auto()) @map("_id") @db.ObjectId
  examId  String @db.ObjectId
  file    String
  fileUrl String
  size    BigInt
  exam    Exam?  @relation(fields: [examId], references: [id])
}

model Files {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  patientId String?  @db.ObjectId
  filename  String
  fileUrl   String
  Patient   Patient? @relation(fields: [patientId], references: [id])
}
